---
title: "Practice with warmXtrophic data and RMarkdown"
author: "Moriah Young"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output: pdf_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
options(tinytex.verbose = TRUE)
```

In this document I will be practicing using RMarkdown while attempting to make a simple graph from the warmXtrophic data

First, I will make sure that the packages I need are in my working environment
```{r, message = FALSE}
for (package in c('tidyverse', 'googledrive', 'googlesheets4', 'tinytex')) {
        if (!require(package, character.only=T, quietly=T)) {
                install.packages(package)
                library(package, character.only=T)
        }
}
```

Next, I need to download the data files that I wish to work with in R - plant composition (percent cover) data from 2019 at UMBS and the plot key file.
```{r}
PC <- read.csv("/Users/moriahyoung/Downloads/umbs_plantcomp_2019.csv")
PlotKey <- read.csv("/Users/moriahyoung/Downloads/plot.csv")
```

I'll combine the two data frames and create a new data frame called "PlantComp" 
```{r}
PlantComp <- full_join(PC, PlotKey, by = c("Plot" = "plot"), na.rm = TRUE)
```

I need to make sure I convert  the date column to the date class or else R won't recognize that this column is filled with dates.
```{r}
PlantComp$Date <- as.Date(PlantComp$Date,
                          format = "%m/%d/%y")
```

Now to work with the data. I want to look at the composition of spotted knapweed (Cest) in plot B2 at UMBS in 2019. To do this, I'll need to subset from the PlantComp dataframe I created above. This was my first attempt and I used "litterals" to do this.
```{r}
CestB2 <- subset(PlantComp, Species == "Cest" & Plot == "B2")
```

Now that I've subsetted my data, I'll plot the percent cover of Cest in B2 over the growing season in 2019
```{r}
ggplot(data = CestB2, aes(x = Date, y = Cover)) +
        geom_bar(stat = "identity", fill = "purple") +
        labs(title = "Cest Composition in Plot B2 at UMBS",
             subtitle = "2019",
             x = "Date", y = "Percent Cover")
```

Time to create a function! This will allow me to call any species in any plot and create a graph to show it's growth over time.
```{r}
perc_cover_plot <- function(Species, Plot) { 
        sp <- Species
        pl <- Plot
        PlantCompSub <- subset(PlantComp, Species == sp & Plot == pl)
        return(plot(Cover ~ Date, 
                    data = PlantCompSub, 
                    main = "2019 Percent Cover Over Time", 
                    col = "blue", 
                    pch = 19))
}
```

Let's use this function to look at the cover of spotted knapweed (code = Cest) in plot A1.
```{r}
perc_cover_plot("Cest", "A1")
```

Further questions I have:
1. Is there a way to have the title change with the different plot and species every time you call the function? Right now you wouldn't know which species or plot the graph was showing.
2. How could I create a function that returns a plot for each 24 plots for one species? Or a single
plot that has each plot graphed with each plot being a different color for a single species?
